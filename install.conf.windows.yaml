# Configuration for Windows
- defaults:
    link:
      relink: true      # Replace existing symlinks
      create: true      # Create parent directories if needed

- clean: ['~']          # Remove broken symlinks in home directory

- create:
    - ~/Code

- shell:
    # Install applications via winget
    - command: powershell -ExecutionPolicy Bypass -File scripts/windows/winget.ps1
      description: Installing applications via winget
      stdout: true
      stderr: true

    # Install Nerd Fonts via Chocolatey (requires Admin)
    - command: powershell -ExecutionPolicy Bypass -File scripts/windows/choco.ps1
      description: Installing Nerd Fonts via Chocolatey
      stdout: true
      stderr: true

    # Configure Git for Windows (CRLF handling)
    - command: git config --global core.autocrlf true
      description: Configure Git line endings for Windows
      stdout: true

- link:
    # PowerShell 5.1 Profile (Windows default)
    ~/Documents/WindowsPowerShell/Microsoft.PowerShell_profile.ps1:
      path: config/powershell/Microsoft.PowerShell_profile.ps1
      create: true

    # PowerShell 7 Profile (if installed)
    ~/Documents/PowerShell/Microsoft.PowerShell_profile.ps1:
      path: config/powershell/Microsoft.PowerShell_profile.ps1
      create: true
      ignore-missing: true

    # Starship Config
    ~/.config/starship.toml:
      path: config/starship/starship.toml
      create: true

    # Windows Terminal Settings
    ~/AppData/Local/Packages/Microsoft.WindowsTerminal_8wekyb3d8bbwe/LocalState/settings.json:
      path: config/windows-terminal/settings.json
      create: true
      force: true